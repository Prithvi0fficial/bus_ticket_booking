<style>
    /* Seat Selection Container */
    .seat-selection-container {
      max-width: 500px;
      margin: 40px auto;
      padding: 30px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
      font-family: 'Segoe UI', sans-serif;
    }
    
    /* Heading */
    .seat-selection-container h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .driver-label {
      display: inline-block;
      background-color: #333;
      color: white;
      padding: 5px 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-size: 14px;
    }
    
    /* Seat Styles */
    .seat-wrapper {
      position: relative;
      width: 50px;
      height: 70px;
      cursor: pointer;
      display: inline-block;
      transition: transform 0.2s ease;
    }
    
    .seat-wrapper input {
      display: none;
    }
    
    .seat-inner {
      width: 100%;
      height: 100%;
      background-color: #4CAF50; /* Available */
      border-radius: 10px 10px 5px 5px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      padding-bottom: 5px;
    }
    
    .seat-head {
      height: 15px;
      width: 100%;
      background-color: #2e7d32;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    
    .seat-body {
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .seat-label {
      color: white;
      font-weight: bold;
      font-size: 14px;
    }
    
    .seat-wrapper:hover:not(.booked) .seat-inner {
      transform: scale(1.05);
    }
    
    /* Selected */
    .seat-wrapper input:checked + .seat-inner {
      background-color: #FFA500;
      box-shadow: 0 0 10px #FFA500aa;
    }
    
    /* Booked */
    .seat-wrapper.booked input + .seat-inner {
      background-color: #F44336 !important;
      color: white;
      cursor: not-allowed;
      box-shadow: none;
    }

    
    /* Aisle */
    .aisle {
      width: 30px;
      height: 70px;
    }
    
    .seat-row {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 10px;
    }
    
    .seat-group {
      display: flex;
      gap: 10px;
    }
    
    /* Confirm Button */
    .confirm-btn {
      background-color: #007bff;
      color: white;
      padding: 10px 25px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin-top: 20px;
      cursor: pointer;
      transition: 0.3s ease;
    }
    
    .confirm-btn:hover {
      background-color: #0056b3;
    }
    
    /* Summary */
    .selection-summary {
      margin-top: 15px;
      font-size: 16px;
    }
    
    /* Legend */
    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      font-size: 14px;
    }
    
    .legend div {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .legend-box {
      width: 20px;
      height: 20px;
      border-radius: 5px;
    }
    .available { background-color: #4CAF50; }
    .selected { background-color: #FFA500; }
    .booked { background-color: #F44336; }
    </style>
    
    <div class="seat-selection-container">
      <h2>Seat Selection</h2>
      <p><strong>{{ schedule.bus.name }}</strong></p>
      <p>
        Departure: {{ schedule.departure_time|date:"d-M-Y" }} {{ schedule.departure_time|time:"h:i A" }}
      </p>
      
      <div class="driver-label">Driver</div>
    
      <form method="post">
        {% csrf_token %}
        {% for row in seat_layout %}
          <div class="seat-row">
            <div class="seat-group">
              {% for seat in row %}
                {% if seat == "aisle" %}
                  <div class="aisle"></div>
                {% else %}
                  <label class="seat-wrapper {% if seat in booked_seats %}booked{% endif %}" data-seat="{{ seat }}">
                    <input type="checkbox" name="selected_seats" value="{{ seat }}" {% if seat in booked_seats %}disabled{% endif %}>
                    <div class="seat-inner">
                      <div class="seat-head"></div>
                      <div class="seat-body">
                        <span class="seat-label">{{ seat }}</span>
                      </div>
                    </div>
                  </label>
                {% endif %}
              {% endfor %}
            </div>
          </div>
        {% endfor %}
    
        <div class="selection-summary">
          Selected Seats: <strong id="selected-seats-display">None</strong><br>
          Total Seats: <strong id="total-seats-display">0</strong><br>
          Total Price: â‚¹<strong id="total-price-display">0</strong>
        </div>
    
        <button type="submit" class="confirm-btn">Confirm Selection</button>
      </form>
    
      <div class="legend">
        <div><div class="legend-box available"></div> Available</div>
        <div><div class="legend-box selected"></div> Selected</div>
        <div><div class="legend-box booked"></div> Booked</div>
      </div>
    </div>
    
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const seatCheckboxes = document.querySelectorAll('input[name="selected_seats"]');
        const seatDisplay = document.getElementById("selected-seats-display");
        const totalDisplay = document.getElementById("total-seats-display");
        const priceDisplay = document.getElementById("total-price-display");
        const pricePerSeat = parseFloat("{{ seat_price|floatformat:2 }}");
    
        seatCheckboxes.forEach(checkbox => {
          checkbox.addEventListener('change', () => {
            const selected = Array.from(seatCheckboxes)
                                  .filter(cb => cb.checked)
                                  .map(cb => cb.value);
    
            const count = selected.length;
            seatDisplay.textContent = count > 0 ? selected.join(', ') : 'None';
            totalDisplay.textContent = count;
            priceDisplay.textContent = (count * pricePerSeat).toFixed(2);
    
            console.log("Selected:", selected);
            console.log("Total Price:", count * pricePerSeat);
          });
        });
      });
    </script>
    
    
      
    